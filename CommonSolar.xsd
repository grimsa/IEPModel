<?xml version="1.0" encoding="UTF-8"?>
<!--**************************************************************************
    schema: CommonSolar.xsd v 2.0
    Author(s):  
    v 2.0 Michael Palmquist (SolarNexus Inc). Thanks to Derek Mitchell (Verdiseno) for design input.
    v 1.x Michael Palmquist (SolarNexus Inc). Thanks to Mark Galli (Solmetric Corp) for design input.
    Description: Schema contains the elements needed to define solar electric or solar thermal systems.
    **************************************************************************** -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.iepmodel.net"
    targetNamespace="http://www.iepmodel.net" elementFormDefault="qualified"
    attributeFormDefault="unqualified" version="1.0">
    <xs:include schemaLocation="Common.xsd"/>
    <xs:include schemaLocation="CommonElectrical.xsd"/>
    <xs:include schemaLocation="Building.xsd"/>
    <xs:simpleType name="trackingModeEnum">
        <xs:annotation>
            <xs:documentation>Enumeration of eligible tracking modes for a PV mounting structure.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="FIXED"/>
            <xs:enumeration value="SINGLE_AXIS"/>
            <xs:enumeration value="DUAL_AXIS"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:element default="45" name="trackingRange1Axis" nillable="true" type="xs:double">
        <xs:annotation>
            <xs:documentation>For '1-Axis' tracking only, this represents the +/- range that the tracking mechanism rotates around the axis of rotation.</xs:documentation>
        </xs:annotation>
    </xs:element>
    <xs:simpleType name="arrayInstallStyleEnum">
        <xs:restriction base="xs:string">
            <xs:enumeration value="PARALLEL_TO_ROOF"/>
            <xs:enumeration value="TILT-UP_ROOF"/>
            <xs:enumeration value="BALLASTED_TILT"/>
            <xs:enumeration value="GROUND_MOUNT"/>
            <xs:enumeration value="POLE_MOUNT"/>
            <xs:enumeration value="OTHER"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="panelOrientationEnum">
        <xs:annotation>
            <xs:documentation>Panels (PvModules and potentially thermal panels) may be oriented in portrait or landscape.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="PORTRAIT"/>
            <xs:enumeration value="LANDSCAPE"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="panelTiltEdgeEnum">
        <xs:annotation>
            <xs:documentation>When a panel (PvModule or Thermal panel) is tilted from its RoofPlane, these are the possible edges on which the tilt can occur.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="BOTTOM"/>
            <xs:enumeration value="TOP"/>
            <xs:enumeration value="LEFT"/>
            <xs:enumeration value="RIGHT"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="dcInputEnum">
        <xs:annotation>
            <xs:documentation>This is the set of possible dc circuit input types to a DC device (DC devices include combiners, and maxPowerPointTrackers).</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="DC_STRING_INDIVIDUAL"/>
            <xs:enumeration value="DC_STRING_SET"/>
            <xs:enumeration value="DC_COMBINER"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="polarityOfGroundEnum">
        <xs:annotation>
            <xs:documentation>Possible values for ground polarity of an inverter. Used in iverterDefinition. </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="POSITIVE"/>
            <xs:enumeration value="NEGATIVE"/>
            <xs:enumeration value="EITHER"/>
            <xs:enumeration value="FLOATING"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:complexType name="mountingSystemDefinitions">
        <xs:annotation>
            <xs:documentation>A collection of mounting system definitions in the associated system.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="mountingSystemDefinition" type="mountingSystemDefinition" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="mountingSystemDefinition">
        <xs:annotation>
            <xs:documentation>Describes the physical mounting structure used to secure an array of solar panels (may be photovoltaic or thermal).</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="manufacturer" type="xs:string"/>
            <xs:element name="componentsDescription" type="xs:string">
                <xs:annotation>
                    <xs:documentation>Include model numbers and descriptions of mounting system components.  Note, if there is more than one manufacturer's parts used, list the secondary mfr's name here with its component.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="anchorFastenerDiameter" type="xs:double">
                <xs:annotation>
                    <xs:documentation>For expedited permitting, if cannot verify that proposed anchor fasteners suit racking manufacturer guidelines, then need to specify the diameter of lag screw, hanger bolt, or self-drilling screw used to fasten anchors.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="roofPenetrationWeatherProofing" type="xs:string">
                <xs:annotation>
                    <xs:documentation>Description of the method used to weatherproof roof penetrations (e.g. flashing, caulk) </xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID" use="required"/>
    </xs:complexType>
    <xs:complexType name="mountingSystem">
        <xs:annotation>
            <xs:documentation>Describes the instance of a physical mounting structure used to secure an array of solar panels (may be photovoltaic or thermal).</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element minOccurs="0" name="anchorTotal" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Total number of attachment points for the array. Anchors are also known as “stand-offs”, “feet”, “mounts” or “points of attachment.”</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="anchorsInAdjacentRowsStaggered" type="xs:boolean"/>
            <xs:element minOccurs="0" name="anchorMaxHorizontalSpacing" type="xs:double"
                        form="qualified">
                <xs:annotation>
                    <xs:documentation>The maximum horizontal spacing allowed between attachment points. Horizontal anchor spacing is also known as “cross-slope” or “east-west” anchor spacing. See racking product manual for maximum spacing allowed based on maximum design wind speed, and permitting guidelines for maximum spacing allowed for structural load. </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="anchorFastenersMeetManufacturerGuidelines"
                        type="xs:boolean">
                <xs:annotation>
                    <xs:documentation>Do the proposed anchor fasteners meet the manufacturer’s guidelines, if provided? If yes, may be suitable enough to not require defining anchor fastener diameter and embedment.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="anchorFastenerEmbedmentDepth" type="xs:double">
                <xs:annotation>
                    <xs:documentation>For expedited permitting, if cannot verify that proposed anchor fasteners suit racking manufacturer guidelines, then need to specify the depth that anchor fasteners will be embedded into roof's structural members (i.e. rafters).</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="1" minOccurs="0" name="anchorFastenersPerAnchor" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Typically one screw per anchor.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="numberOfRowsPerRack" type="xs:int" default="1">
                <xs:annotation>
                    <xs:documentation>Describes the quantity of module rows within a single rack structure. Ground mount tilted racks typically have multiple module rows.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="totalArrayWeight" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Total weight in pounds (lbs) of the array's panels and its mounting structure components.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="totalPanelSurfaceArea" type="xs:double">
                <xs:annotation>
                    <xs:documentation>The total surface area (in square feet) of all the panels in the array.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="mountingSystemDefinitionIdRef" type="xs:IDREF" use="required">
            <xs:annotation>
                <xs:documentation>A reference to a mounting system definition.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
    </xs:complexType>
    <xs:complexType name="inverterDefinition">
        <xs:annotation>
            <xs:documentation>Specifications of an inverter.</xs:documentation>
        </xs:annotation>
        <xs:complexContent mixed="false">
            <xs:extension base="equipmentDefinition">
                <xs:sequence>
                    <xs:element minOccurs="0" name="inverterCategory" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>An optional description of the inverter's type, such as "Micro-inverter - Grid-tie," "String Inverter - Grid-tie," "Battery-based Inverter - Grid-tie/Off-grid," "Battery-based Inverter - Off-grid," "Central Inverter"</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="isMicroInverter" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Provides a definitive way of differentiating the inverter architecture as a String or Micro-Inverter. If TRUE, then the inverter is intended to be placed in series into an AC PV branch circuit.  All other inverters essentially conform to a string architecture. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="isAcpvIntegratedMicroInverter" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>(if isMicroInverter == true) describes whether the micro-inverter is integrated as part of an ACPV module rather than sold as a separate device. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxNumberOfInvertersPerBranch" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>The maximum number of inverters of this type that may be wired together in a branch. This applies only to microinverters</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="mppTrackerQuantity"
                        type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>The number of MPP Trackers within the inverter.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="inputMinDcOperatingVoltage"
                        type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Lower end of the inverter's DC operating voltage window.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="inputMaxMpptDcCurrent"
                        type="xs:double">
                        <xs:annotation>
                            <xs:documentation>The maximum DC input current for each MPPT</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="inputMinMpptDcVoltage"
                        type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Lower end of the inverter's Maximum Power Point Tracker DC voltage window.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="inputMaxMpptDcVoltage"
                        type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Higher end of the inverter's Maximum Power Point Tracker DC voltage window.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="maxDcInputPower" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Maximum PV module input power in DC watts at STC.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="nominalDcVoltage" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>DC voltage at normal operating conditions.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="maxDcVoltage" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Maximum DC system voltage.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="pvDcStartVoltage" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Given in volts DC. Some inverters have a voltage point that differs from the minimum MPPT DC voltage at which it will start operation.  This is typically higher than the minimum MPPT voltage.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="nominalDcCurrent" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Nominal DC input current in amps.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxDcCurrent" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Maximum usable current (Isc) in amps.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="dcTerminalQuantity"
                        type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Number of DC terminals.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="dcTerminalMechanism" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Mechanism used for the terminal, for example "Screw Compression".</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="dcTerminalWireRange" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the range of wire sizes that the DC terminals accept (for example "10-6" would be 10AWG on the small end up to 6AWG).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedDcDisconnect" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes whether any DC disconnect is integrated into the inverter (for example as "Standard," "Standard (Load break rated)," "Optional," or "None"). </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedDcDisconnectRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Rating in amps of any pre-integrated DC disconnect.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedCombiner" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes whether a fused combiner is integrated into the inverter (for example, standard or optional).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedCombinerFuses" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>The rating, in amps, of any fuses that ship pre-installed in the inverter's integrated fused combiner.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedCombinerMaxFuse" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Rating in amps of the maximum fuse that the integrated fused combiner can accomodate.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="nominalAcPower" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Maximum continuous power in watts AC.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="nominalAcVoltage" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>The nominal grid voltage to which the inverter connects, for example 240, 208, etc.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="gridVoltageRange" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Range of AC voltages within which the inverter can operate.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="gridFrequency" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Nominal grid frequency, in Hz, that the inverter is specified to operate, for example "60".</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxAcCurrent" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>AC current in amps.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="acOcpdRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Rating in amps for any integrated AC over current protection device (OCPD).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="acOcpdInterruptCapacity" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Interrupt rating in kAic for the AC OCPD.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedAcDisconnect" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes whether any AC disconnect is integrated into the inverter (for example as "Standard," "Optional," or "None").</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedAcDisconnectRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>The rating, in amps, of the integrated AC disconnect, if included.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="neutralSizingRequirement" type="xs:string"/>
                    <xs:element minOccurs="0" name="acTerminalQuantity" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Number of AC terminals per phase.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="acTerminalWireRange"
                        type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the range of wire sizes that the AC terminals accept (for example "10-6" would be 10AWG on the small end up to 6AWG).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="gecTerminalQuantity"
                        type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Number of GEC (grounding electrode conductor) terminals in the inverter.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="gecTerminalWireRange"
                        type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the range of wire sizes that the GEC (grounding electrode conductor) terminals accept (for example "10-6" would be 10AWG on the small end up to 6AWG).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="maxEfficiency" type="xs:double"/>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecWeightedEfficiency"
                        type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Efficiency published by the California Energy Commission (CEC).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="euroEtaEffeciency"
                        type="xs:double"/>
                    <xs:element maxOccurs="1" minOccurs="0" name="transformer" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the inverter based on a transformer architecture?  TRUE indicates there is a transformer.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="polarityOfGround" type="polarityOfGroundEnum">
                        <xs:annotation>
                            <xs:documentation/>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cooling" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the mechanism used for cooling the inverter.  Values expected to inlcude: "Forced Air," "Passive," etc.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="csiApprovedBuiltInMeter" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is there a built in meter approved by the California Solar Initiative?</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="csiNightTareLoss" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Given in watts.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="ambientTempRange" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the allowable ambient temperature range for normal operation.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="dataInterfaceOptions"
                        type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes any and all types of interfaces that can be used for communications with the inverter.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="conduitEntryZones" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the physical sides of the inverter enclosure where conduit may be connected. Assumes user is facing the front of the inverter. For example, "bottom, back, both sides."</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="compliances" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Lists any testing standards with which the inverter complies.  For example, "UL 1741; IEEE 529; IEEE 1547; UL 1998."</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="ul1741Compliant" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the inverter UL 1741 compliant?</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="nrtlCertifyingUL1741"
                        type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Names the NRTL (testing lab) that has certified UL 1741 compliance.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="csiApproved" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the Inverter listed as approved by the California Solar Initiative (CSI)? True means that it is approved. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="notes" type="xs:string">
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="dcOptimizerDefinition">
        <xs:annotation>
            <xs:documentation>Specifications of a dc optimizer.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentDefinition">
                <xs:sequence>
                    <xs:element name="pvModuleInputs" type="xs:int">
                        <xs:annotation>
                            <xs:documentation>Quantity of PV modules that may be connected.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="ratedPower" type="xs:int">
                        <xs:annotation>
                            <xs:documentation>The rated power in watts for each pv module input.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="inputDcMaxVoltage" type="xs:decimal"/>
                    <xs:element name="inputDcMaxCurrent" type="xs:decimal">
                        <xs:annotation>
                            <xs:documentation>The maximum DC current in amps per pv module input.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="inputDcMinMpptVoltage">
                        <xs:annotation>
                            <xs:documentation>Lower end of the optimizer's Maximum Power Point Tracker DC voltage window.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="inputMaxMpptDcVoltage">
                        <xs:annotation>
                            <xs:documentation>Higher end of the optimizer's Maximum Power Point Tracker DC voltage window.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="outputDcMaxVoltage" type="xs:decimal"/>
                    <xs:element name="outputMaxDcCurrent" type="xs:decimal"/>
                    <xs:element name="systemDcMaxVoltage" type="xs:int"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="pvModuleDefinition">
        <xs:annotation>
            <xs:documentation>Specifications of a PV module.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentDefinition">
                <xs:sequence>
                    <xs:element minOccurs="0" name="acpvModule" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is this an ACPV module sold as single unit with an integrated microInverter?</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedMicroInverter"
                        type="inverterDefinition">
                        <xs:annotation>
                            <xs:documentation>If acpvModule = TRUE, the inverter is built into the PV module and its definition is incorporated here. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="includesDcOptimizer" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the PV Module sold with an integrated DC optimizer built in?</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedDcOptimizer"
                        type="dcOptimizerDefinition">
                        <xs:annotation>
                            <xs:documentation>If the PV module incorporates an integrated DC optimizer, this element defines its properties.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="pstc">
                        <xs:annotation>
                            <xs:documentation>Rated power output at Standard Test Conditions (stc).</xs:documentation>
                        </xs:annotation>
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="1.0"/>
                                <xs:maxInclusive value="800.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="pstcToleranceHighPercent">
                        <xs:annotation>
                            <xs:documentation>Upper range of variation from rated power at STC. A module with this specification may output up to x % more than rated Pstc.</xs:documentation>
                        </xs:annotation>
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="0.0"/>
                                <xs:maxInclusive value="20.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="pstcToleranceLowPercent">
                        <xs:annotation>
                            <xs:documentation>Lower range of variation from rated power at STC. A module with this specification may output up to x % less than rated Pstc.</xs:documentation>
                        </xs:annotation>
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-20.0"/>
                                <xs:maxInclusive value="0.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="pptc">
                        <xs:annotation>
                            <xs:documentation>Rated power at PVUSA test conditions (PTC).</xs:documentation>
                        </xs:annotation>
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="1.0"/>
                                <xs:maxInclusive value="800.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="vmpp" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Voltage at max power (V)</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="impp" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Current in amps at max power.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="voc" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Open Circuit Voltage (V)</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="isc" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Short circuit current in amps.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="maxSystemVoltage" type="xs:double"
                        > </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="maxSystemCurrent" type="xs:double"
                        > </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fuseRating" type="xs:integer"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="noct" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Nominal operating cell temperature (NOCT), expressed in deg C.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="vocTempCoefficient" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Open circuit voltage temperature coefficient, expressed in % / deg C.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="iscTempCoefficient" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Short circuit current temperature coefficient, expressed in % / deg C.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxPowerTempCoefficient" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Maximum power temperature coefficient, expressed in % / deg C.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="moduleEfficiency" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Average efficiency of the entire module assembly, in percent.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cellEfficiency" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Average efficiency of a single cell within the module assembly, in percent.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cellTechnology" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the type of photovoltaic cell material.  Values include "Mono," "Poly," "a-Si," "Ribbon," "Mono + a-Si," "CdTe," "CIGS," "a-Si + micro-c," and "CIS" </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="moduleConstruction"
                        type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes the type of construction used for the module.  For example, "Glass on Glass - frameless," "Framed glass with backsheet," etc. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="bipv" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the module classified as Building Integrated PV? The California Solar Initiative's (CSI) list of approved modules maintains such a classification.  TRUE means that it is.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cableConnector">
                        <xs:annotation>
                            <xs:documentation>Types of cable connections. Values may include "J-Box," "MC-3 (Solarline1)," "MC-4 (Solarline2)," "Tyco SolarLok," "Terminals," "MC (unspecified)"</xs:documentation>
                        </xs:annotation>
                        <xs:simpleType>
                            <xs:restriction base="xs:string">
                                <xs:maxLength value="255"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cableDiameter" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Wire gauge in AWG or kcmil.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="connectorCableLength" type="xs:double">
                        <xs:annotation>
                            <xs:documentation>Length of pre-installed cables.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cellDimensions" type="xs:string"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cellCount" type="xs:integer"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="bypassDiodeCount"
                        type="xs:integer"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="parallelSubstrings"
                        type="xs:integer"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="depthWithJunctionBox"
                        type="xs:double"> </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="frameMaterial" type="xs:string"> </xs:element>
                    <xs:element minOccurs="0" name="frameColor" type="xs:string"/>
                    <xs:element minOccurs="0" name="backsheetColor" type="xs:string"/>
                    <xs:element maxOccurs="unbounded" minOccurs="0" name="powerWarranty">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="WarrantyPeriod" type="xs:integer">
                                    <xs:annotation>
                                        <xs:documentation>This defines the number of years of the warranty from the point at which the system was installed.</xs:documentation>
                                    </xs:annotation>
                                </xs:element>
                                <xs:element name="WarrantedPower" type="xs:string">
                                    <xs:annotation>
                                        <xs:documentation>This describes the percentage of original rated output that can be expected at the end of the WarrantyPeriod</xs:documentation>
                                    </xs:annotation>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                    <xs:element minOccurs="0" name="compliances" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Describes testing standards with which the PV module complies.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="ul1703Compliant" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the PV module UL 1703 compliant?</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="nrtlCertifyingUl1703Compliance" type="xs:string">
                        <xs:annotation>
                            <xs:documentation>Name of the testing lab (NRTL) that certifies compliance with UL 1703.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="csiApproved" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>Is the PV module listed as approved by the California Solar Initiative (CSI)? True means that it is approved. </xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecVmppLowLight">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="500.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecImppLowLight">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="50.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecVmppNoct">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="1.0"/>
                                <xs:maxInclusive value="500.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecImppNoct">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="50.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="cecGeometricMultipl">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".10"/>
                                <xs:maxInclusive value="1.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="measurementDate">
                        <xs:simpleType>
                            <xs:restriction base="xs:string">
                                <xs:maxLength value="255"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamAref">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="10.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamILref">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="20.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamIoref">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="1.0e-13"/>
                                <xs:maxInclusive value="1.0e-6"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamRs">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="1.0e-3"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamRshref">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="10.0"/>
                                <xs:maxInclusive value="1000000.00"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="fiveParamAdjust">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaIxo">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="50.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaIxxo">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="50.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaDiodeFactor">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="10.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaThermalVoltage">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="10.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaMbVoc">
                        <xs:simpleType>
                            <xs:restriction base="xs:double"/>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaMbVmpp">
                        <xs:simpleType>
                            <xs:restriction base="xs:double"/>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="gammaPmppPercent">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-10.0"/>
                                <xs:maxInclusive value="10.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="betaVocPercent">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-2.0"/>
                                <xs:maxInclusive value="2.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="betaMppPercent">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-2.0"/>
                                <xs:maxInclusive value="2.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="alphaIscPercent">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-2.0"/>
                                <xs:maxInclusive value="2.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="alphaImppPercent">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-2.0"/>
                                <xs:maxInclusive value="2.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaTempFactorA">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-5.0"/>
                                <xs:maxInclusive value="-1.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaTempFactorB">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-1.0"/>
                                <xs:maxInclusive value="-0.01"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefA0">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefA1">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefA2">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefA3">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefA4">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB0">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB1">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB2">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB3">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB4">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefB5">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC0">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC1">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC2">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC3">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC4">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC5">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC6">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaCoefC7">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value="-100.0"/>
                                <xs:maxInclusive value="100.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="sandiaDiffuseAcceptanceFactor">
                        <xs:simpleType>
                            <xs:restriction base="xs:double">
                                <xs:minInclusive value=".1"/>
                                <xs:maxInclusive value="1.0"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                    <xs:element maxOccurs="1" minOccurs="0" name="notes">
                        <xs:simpleType>
                            <xs:restriction base="xs:string">
                                <xs:maxLength value="255"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="dcCombinerDefinition">
        <xs:annotation>
            <xs:documentation>Specification data defining a combiner.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentDefinition">
                <xs:sequence>
                    <xs:element minOccurs="0" name="acVoltageRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Maximum rated AC voltage.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="dcVoltageRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Maximum rated DC voltage.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxContinuousCurrent" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Rating in amps.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="inputCircuitQuantity" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Max number of circuits on the input side.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="ocpdMaxRating" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Maximum rated current (in Amps) of the over-current protection device (OCPD) per input circuit.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="inputMinConductorSize" type="wireGaugeEnum"/>
                    <xs:element minOccurs="0" name="inputMaxConductorSize" type="wireGaugeEnum"/>
                    <xs:element minOccurs="0" name="outputConductorQuantity" type="xs:integer">
                        <xs:annotation>
                            <xs:documentation>Max number of output conductors.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="outputMinConductorSize" type="wireGaugeEnum"/>
                    <xs:element minOccurs="0" name="outputMaxConductorSize" type="wireGaugeEnum"/>
                    <xs:element minOccurs="0" name="integratedDisconnectIncluded" type="xs:boolean"/>
                    <xs:element minOccurs="0" name="integratedDisconnectRating" type="xs:integer"/>
                    <xs:element minOccurs="0" name="monitoringAvailable" type="xs:boolean"/>
                    <xs:element minOccurs="0" name="revenueGradeMonitoring" type="xs:boolean"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="derateFactors">
        <xs:annotation>
            <xs:documentation>A set of environmental or component efficiency effects causing some reduction of ideal system performance. Default values correspond to NREL's PVWatts default values.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element default="0.95" minOccurs="0" name="moduleRatedPowerTolerance"
                type="xs:double">
                <xs:annotation>
                    <xs:documentation>Manufacturers group modules together that test within a specified tolerance of the stated DC power output at STC.  Depending on how they define the group, the actual expected power of the modules may be lower than the STC ratings.  For example, if the module is rated at 200Wstc, but it has a lower power tolerance of -5%, then the assumption should be made that the modules will only output 190Wstc, and have a derate of 0.95.  If the module's lower tolerance is 0%, then the derate would be 1.0. Acceptable PVWatts range = 0.95 to 1.05.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.92" maxOccurs="1" minOccurs="0"
                name="inverterTransformerEfficiency" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.88 to 0.98.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.98" maxOccurs="1" minOccurs="0" name="dcWiringEfficiency"
                type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.97 to 0.99.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.99" maxOccurs="1" minOccurs="0" name="acWiringEfficiency"
                type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.98 to 0.993.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.995" maxOccurs="1" minOccurs="0"
                name="diodesAndConnectionsEfficiency" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.99 to 0.997.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.98" maxOccurs="1" minOccurs="0" name="moduleMismatch"
                type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.97 to 0.995.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.95" maxOccurs="1" minOccurs="0" name="soiling" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.30 to 0.995.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="0.98" maxOccurs="1" minOccurs="0" name="systemAvailability"
                type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0 to 0.995.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="1.0" maxOccurs="1" minOccurs="0" name="shading" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0 to 1.0.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="1.0" form="unqualified" maxOccurs="1" minOccurs="0"
                name="sunTracking" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.95 to 1.0.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element default="1.0" maxOccurs="1" minOccurs="0" name="age" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Acceptable PVWatts range = 0.70 to 1.0.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="weatherData">
        <xs:sequence>
            <xs:element minOccurs="0" name="ExpectedHighTemperature" type="xs:decimal">
                <xs:annotation>
                    <xs:documentation>Expected highest temperature in degrees Celcius at the system's location.  Used to evaluate equipment derating.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="ExpectedLowTemperature" type="xs:decimal">
                <xs:annotation>
                    <xs:documentation>Expected lowest temperature in degrees Celcius at the system's location.  Used to evaluate maximum system output.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="siteWeatherData" type="siteWeatherData"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="exclusionArea">
        <xs:annotation>
            <xs:documentation>For a module layout, this defines any area within a given scene that may contain multiple roofFaces and groundAreas that modules cannot be placed. The coordinates used in this element apply to the whole scene of roofFaces and groundAreas where moduleLayouts are placed (may contain more than one area).</xs:documentation>
        </xs:annotation>
        <xs:all>
            <xs:element minOccurs="0" name="polygon2dSceneCameraView" type="polygon2d"/>
            <xs:element maxOccurs="1" minOccurs="0" name="polygon2dSceneOrthoProjection"
                type="polygon2d"/>
        </xs:all>
        <xs:attribute name="id" type="xs:ID"/>
    </xs:complexType>
    <xs:complexType name="exclusionArea2dLocal">
        <xs:annotation>
            <xs:documentation>For a module layout, this defines any area within a given area that modules cannot be placed. This defines actual dimensions, not a projection. The coordinates used in this element are unique to the roofFace or groundArea where the moduleLayout is placed (does not contain more than one area).</xs:documentation>
        </xs:annotation>
        <xs:all>
            <xs:element maxOccurs="1" minOccurs="0" name="polygon2dLocal" type="polygon2d"/>
        </xs:all>
        <xs:attribute name="id" type="xs:ID"/>
    </xs:complexType>
    <xs:simpleType name="presenceOfUndergroundEntitiesEnum">
        <xs:restriction base="xs:string">
            <xs:enumeration value="NONE"/>
            <xs:enumeration value="YES-LOCATION_MARKED"/>
            <xs:enumeration value="YES-LOCATION_TBD"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:complexType name="groundArrayInstallArea">
        <xs:annotation>
            <xs:documentation>A description of the ground area of a site that may be used for ground mount PV Systems.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="name">
                <xs:annotation>
                    <xs:documentation>Descriptive name for the ground area.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="azimuth" type="angle">
                <xs:annotation>
                    <xs:documentation>IF the ground area is essentially a sloped plane, the azimuth is the compass direction of its slope. For convention, 0 is North, and 180 is south.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="slope" type="angle">
                <xs:annotation>
                    <xs:documentation>If the ground area is essentially a sloping plane, this is the average slope in degrees.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="area" type="area"/>
            <xs:element minOccurs="0" name="solarAccessPercentage" type="solarAccessPercentage"/>
            <xs:element minOccurs="0" name="polygon2dSceneCameraView" type="polygon2d">
                <xs:annotation>
                    <xs:documentation>An array area as defined from an aerial source such as a satellite or airplane. These views are rarely orthographic (straight down), the angles at which the camera has taken the image can result in skewed polygon shapes.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="polygon2dSceneOrthoProjection" type="polygon2d">
                <xs:annotation>
                    <xs:documentation>Describes the geometry of the area from an orthographic view straight down.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="groundAreaPolygon2dLocal"
                type="installAreaPolygon2dLocal">
                <xs:annotation>
                    <xs:documentation>A 2 dimensional array area polygon whose point coordinate system is local to only this polygon. This defines actual dimensions, not a projection. Also includes any obstructions that may be included in the ground area.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="polygon3dScene" type="polygon3d">
                <xs:annotation>
                    <xs:documentation>An array area defined in 3 dimensional space. The area's coordinates exist in a larger scene that may contain multiple roof faces and/or ground areas.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="holes">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" minOccurs="1" name="hole">
                            <xs:annotation>
                                <xs:documentation>A hole is a polygon that is fully enclosed by the ground area polygon. It represents the outline of any object where the array cannot be placed. </xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element minOccurs="0" name="polygon2dSceneOrthoProjection"
                                        type="polygon2d"/>
                                    <xs:element minOccurs="0" name="polygon2dLocal" type="polygon2d"/>
                                    <xs:element minOccurs="0" name="polygon3dScene" type="polygon3d"
                                    />
                                </xs:sequence>
                                <xs:attribute name="id"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="soilCharacter" type="xs:string">
                <xs:annotation>
                    <xs:documentation>A description of the soil type found here. May be a subjective description, such as rocky, clay, sandy, etc.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="notes" type="xs:string">
                <xs:annotation>
                    <xs:documentation>User can capture info about other data fields, and/or describe special circumstances, such as: Types of buried lines and how marked, Equipment &amp;/or materials access issues, whether there is an existing professional soils report, if the site is in a biotic reserve (when applicable), &amp;/or whether an environmental impact report has been done</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="presenceOfBuriedLines"
                type="presenceOfUndergroundEntitiesEnum">
                <xs:annotation>
                    <xs:documentation>Are there buried lines of any kind? In accompanying notes, user should include if mapped on some document.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="presenceOfSepticTanksAndLeachFields"
                type="presenceOfUndergroundEntitiesEnum">
                <xs:annotation>
                    <xs:documentation>Is there a septic tank &amp;/or leach field in the vicinity? Auditor needs to clearly identify their location on a site schematic.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="tractorTrencherAccessible"
                type="xs:boolean">
                <xs:annotation>
                    <xs:documentation>Can a tractor and/or trenching equipment access the ground location?</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID"/>
    </xs:complexType>
    <xs:complexType name="groundArrayInstallAreas">
        <xs:annotation>
            <xs:documentation>Collection of ground areas at the site that can be used for siting solar arrays.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element maxOccurs="unbounded" name="groundArrayInstallArea"
                type="groundArrayInstallArea"/>
            <xs:element minOccurs="0" name="obstructions">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="obstruction" type="obstruction"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="moduleLayout">
        <xs:sequence>
            <xs:element minOccurs="0" name="setbacks">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="setback">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="distance" type="xs:double"/>
                                </xs:sequence>
                                <xs:attribute name="edgeIdRef" type="xs:string"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="moduleSpaces">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="moduleSpace"
                            type="equipmentLocation"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID"/>
        <xs:attribute name="roofFaceIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If the array is located on a defined roof face, then this refers to that roofFace element in the XML doc.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
        <xs:attribute name="groundArrayInstallAreaIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If the array is located on a defined ground installArea, then this refers to that groundArea element in the XML doc.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
    </xs:complexType>
    <xs:complexType name="moduleLayout2dLocal">
        <xs:annotation>
            <xs:documentation>A module layout where all of the element's coordinates are defined by the extents of the single roof or ground area. Because the coordinate system is limited to a single groundArea or roofFace, this element also contains any relevant exclusionArea polygons.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element minOccurs="0" name="setbacks">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="setback">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="distance" type="xs:double"/>
                                </xs:sequence>
                                <xs:attribute name="edgeIdRef" type="xs:string"/>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element minOccurs="0" name="exclusionAreas">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="exclusionArea2dLocal"
                            type="exclusionArea2dLocal"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="moduleSpaces">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="moduleSpace"
                            type="equipmentLocation"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID"/>
        <xs:attribute name="roofFaceIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If the array is located on a defined roof face installArea, then this refers to that RoofFace element in the XML doc.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
        <xs:attribute name="groundArrayInstallAreaIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If the array is located on a defined ground installArea, then this refers to that groundArea element in the XML doc.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
    </xs:complexType>
    <xs:complexType name="modulePosition2d">
        <xs:sequence>
            <xs:element maxOccurs="4" minOccurs="4" name="moduleCorner" type="point2d"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="modulePosition3d">
        <xs:sequence>
            <xs:element maxOccurs="4" minOccurs="4" name="moduleCorner" type="point3d"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="pvModule">
        <xs:complexContent>
            <xs:extension base="equipmentInstance">
                <xs:sequence>
                    <xs:element minOccurs="0" name="sourceCircuitIdRef" type="xs:IDREF">
                        <xs:annotation>
                            <xs:documentation>If defined, this refers to the dcString or acPvBranchCircuit that the pvModule is a member of.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="pvArrayIdRef" type="xs:IDREF"/>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="dcOptimizer">
        <xs:complexContent>
            <xs:extension base="equipmentInstance">
                <xs:sequence>
                    <xs:element minOccurs="0" name="sourceCircuitIdRef" type="xs:IDREF">
                        <xs:annotation>
                            <xs:documentation>If defined, this refers to the dcString that this dcOptimizer is a member of.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="dcInputs">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" name="dcInput">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="0" name="dcInputType" type="dcInputEnum">
                            <xs:annotation>
                                <xs:documentation>Calls out the type of dcInput circuit this is. Either a dcString or dcCombiner.</xs:documentation>
                            </xs:annotation>
                        </xs:element>
                        <xs:element name="dcInputIdRef" type="xs:IDREF">
                            <xs:annotation>
                                <xs:documentation>Reference ID within the XML document instance of the dcInput Circuit (either a dcString or a dcCombiner, which is called out in dcInputCircuitType attribute).</xs:documentation>
                            </xs:annotation>
                        </xs:element>
                    </xs:sequence>
                    <xs:attribute name="id" use="required"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="dcStringSet">
        <xs:annotation>
            <xs:documentation>A simplified description of a set of identical strings of DC PV modules connected in series. All strings in the set are identical so a single description of attributes is used for all of them for brevity. 

Note that a separate dcStringIndividual type allows more detailed defintion of a single string, including a name and a set of individual PV modules that make up the string.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="modulesPerString" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Number of modules in this string.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="strings" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Number of copies of this defined string.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="typicalCircuitConnectionIdRef" type="xs:IDREF">
                <xs:annotation>
                    <xs:documentation>References the set of wired connections from the set of strings to its parent element (for example, a Combiner or InverterInput).

Arrays can be made up of many strings. Each string has its own circuit connection.  Because the strings in any one array are almost always connected to their parent element in a common way, this typicalCircuitConnection element defines the commonly used connection approach from any one of the strings to the parent element (a combiner, or inverter).

If circuit connections vary between strings, this element should not be used.  Instead, use the individual dcString element which contains its own circuitConnection reference.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="sourceCircuitMember">
        <xs:annotation>
            <xs:documentation>Describes the equipment making up an individual source circuit member. For dcStrings it is a specific pvModule, or dcOptimizer + pvModule instance(s). For acPvBranchCircuits, it is the microInverter and pvModule(s) attached to it. Note that there is a collection of pvModules because some DC optimizers and micro-inverters support input of more than one module.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:choice minOccurs="0">
                <xs:element minOccurs="0" name="dcOptimizerIdRef"/>
                <xs:element minOccurs="0" name="microInverterIdRef"/>
            </xs:choice>
            <xs:element name="pvModules">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="pvModuleIdRef" type="xs:IDREF"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id"/>
    </xs:complexType>
    <xs:complexType name="sourceCircuitMembers">
        <xs:sequence>
            <xs:element name="sourceCircuitMember" type="sourceCircuitMember" maxOccurs="unbounded"
            />
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="dcString">
        <xs:annotation>
            <xs:documentation>A detailed defintion of a single string of PV modules connected in series that output DC electricity. dcStrings are suitable for use with string or central inverter system architectures.

Can optionally include detailed information on each individual string, including name, circuit connection, and the ability to associate individual array modules to membership in individual strings.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element minOccurs="0" name="name" type="xs:string">
                <xs:annotation>
                    <xs:documentation>A unique identifier for the string. For example "S1."</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="pvModuleQuantity" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Number of modules in this string.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="dcOptimizerQuantity" type="xs:int">
                <xs:annotation>
                    <xs:documentation>Number of dcOptimizers (if used) in this string. Note that some dcOptimizers allow one or two modules per unit, so number of modules and dc optimizers can vary.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="outputCircuitIdRef" type="xs:IDREF">
                <xs:annotation>
                    <xs:documentation>Represents the wired connection from the string to its next upstream component (for example, a Junction Box, a Combiner, or Inverter).</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="sourceCircuitMembers" type="sourceCircuitMembers">
                <xs:annotation>
                    <xs:documentation>Collection of individual dcOptimizer (if used) and pvModule instances that are members of this string. Provides mapping to individual instances of modules, or DC optimizer + module combinations that are are members of this string.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID" use="required"/>
        <xs:attribute name="dcOptimizerDefinitionIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If separate dc optimizers are used in this string, this refers to the equipment defintion containing its specs.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
    </xs:complexType>
    <xs:complexType name="dcCombiner">
        <xs:annotation>
            <xs:documentation>A DcCombiner only combines DC inputs.  AC circuits can be combined using an AcElectricalPanel type element.

The EquipmentDefinitionRefID for the DcCombiner references the ID of the associated CombinerDefinition.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentInstance">
                <xs:sequence>
                    <xs:element name="outputCircuitIdRef" type="xs:IDREF" minOccurs="0">
                        <xs:annotation>
                            <xs:documentation>Reference to the output circuitConnection from this Combiner to its parent (inverter or sub-combiner).</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element name="dcInputs" type="dcInputs">
                        <xs:annotation>
                            <xs:documentation>Collection of DC input source circuits.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="dcInputSummary">
        <xs:annotation>
            <xs:documentation>A summary of the total PV source inputs (modules and strings) being fed into the string inverter. This summary excludes any notion of circuit connections, combiners, etc. It only accounts for the source circuit strings that are eventually fed into a specific inverter. Use this element when no circuit connections are defined.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="modules" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Total quantity of modules feeding the inverter.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="strings" minOccurs="0">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="unbounded" name="dcStringSet" type="dcStringSet">
                            <xs:annotation>
                                <xs:documentation>In many cases, there will be a single string set because all strings have the same number of modules. However, a separate stringSet can be created for each set of strings of a given number of modules.</xs:documentation>
                            </xs:annotation>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="acPvBranchCircuit">
        <xs:annotation>
            <xs:documentation>An AC Branch circuit is a quantity of AC Modules connected in series.

The AC Branch Circuit defintion assumes that all AC modules in the circuit share the same PvModule and Inverter Definitions.  Although micro-inverter technology allows an AC Branch to contain different makes and models in series, this is a highly unusual use case not supported by this schema.  Such a case would typically come about in a remove and replace scenario well after the project was implemented.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element minOccurs="0" name="name" type="xs:string"/>
            <xs:element name="usesAcpvModules" type="xs:boolean">
                <xs:annotation>
                    <xs:documentation>Describes whether the branch circuit is composed of ACPV modules, or separate individual micro-inverters and PV modules. An ACPV module is a single unit where the micro-inverter has been integrated into the PV Module. In case of ACPV modules, there are no separate micro-inverter instances.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="pvModuleQuantity" type="xs:int">
                <xs:annotation>
                    <xs:documentation>The number of individual pvModules in the AC PV branch circuit. 

NOTE: An AC PV branch circuit may be composed of
1) ACPV modules (a single integrated micro-inverter and PV module unit), OR 2) independent PV modules paired with separate micro-inverters. In case of separate modules and micro-inverters, the micro-inverter may accept more than one PV module per inverter, reducing the number of micro-inverters.  </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="microInverterQuantity" type="xs:int"/>
            <xs:element minOccurs="0" name="outputCircuitIdRef" type="xs:IDREF">
                <xs:annotation>
                    <xs:documentation>References the electrical wiring that the acPvBranchCircuit feeds into. </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="sourceCircuitMembers" type="sourceCircuitMembers">
                <xs:annotation>
                    <xs:documentation>Collection of individual microInverter and pvModule instances that are members of this acPvBranchCircuit.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID" use="required"/>
        <xs:attribute name="microInverterDefinitionIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>If all the modules in the AC PV branch circuit share the same microinverter, then use this attribute to contain the ID of its Equipment Definition.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
    </xs:complexType>
    <xs:complexType name="maxPowerPointTracker">
        <xs:annotation>
            <xs:documentation>PPT in an inverter.  An inverter may have more than one PPT.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element minOccurs="0" name="name" type="xs:string"/>
            <xs:element name="dcInputs" type="dcInputs"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="stringInverter">
        <xs:annotation>
            <xs:documentation>Defines a specific instance of a string inverter in a PvSystem that converts DC electricity to AC.  Includes all the possible DC inputs.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentInstance">
                <xs:sequence>
                    <xs:element minOccurs="0" name="dcInputSummary" type="dcInputSummary">
                        <xs:annotation>
                            <xs:documentation>Summary of PV module source circuit strings.  Use this element to describe the total inputs to the inverter when no circuit connections are defined.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="maxPowerPointTrackers">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element maxOccurs="unbounded" name="maxPowerPointTracker"
                                    type="maxPowerPointTracker">
                                    <xs:annotation>
                                        <xs:documentation>Maximum power point tracker (MPPT) in an inverter.  An inverter may have more than one MPPT.</xs:documentation>
                                    </xs:annotation>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                    <xs:element minOccurs="0" name="dcInputs" type="dcInputs">
                        <xs:annotation>
                            <xs:documentation>Use this element to describe the dc inputs for string inverters that do not have maximum power point trackers. DO NOT use this element if the inverter has maximum power point trackers.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="outputCircuitIdRef" type="xs:IDREF">
                        <xs:annotation>
                            <xs:documentation>The outputCircuit element references the AC side of the DC to AC Inverter.  It uses the common design pattern of each electrical equipment instance having a single circuitConnection element that describes its electrical connection to upstream electrical equipment (for example, electricalPanels, etc).  
                                
It relies on its optional equipmentWhereConnectedIdRef attribute to describe the upstream equipment instance to which it is connected. For string inverters, the equipmentWhereConnectedIdRef attribute should reference the electricalPanel element that represents the electrical panel where the Inverter will be (or already is) connected.
                                
If the PvDesign is used independently (a PvDesign document) then the equipmentWhereConnectedIdRef attribute should reference an electricalPanel element within the PvDesign element. The referenced electricalPanel can represent an existing electrical panel on the site, or a new panel (perhaps serving as an AC Combiner).
                                
If the PvDesign is used within a Project.xml document, and the PvDesign calls for the connection of the Inverter to an existing ElectricalPanel, the EquipmentWhereConnectedIdRef attribute should reference an ElectricalPanel element within the ExistingElectricalDistributionHierarchy element of the Site.  If the PvDesign calls for the inverter to connect to a new ElectricPanel, then the EquipmentWhereConnectedIdRef attribute should reference an ElectricalPanel instance within the PvDesign itself.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="dcGroundingElectrodeConductor"
                        type="groundingElectrodeConductor">
                        <xs:annotation>
                            <xs:documentation>The conductor that grounds the DC system. NEC 690.47C calls out acceptable ways to install DC grounding electrode conductors.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedDcCombinerInUse" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>This indicates whether the system is using the inverter's integrated disconnect switch, rather than whether the inverter has one. The InverterDefintion describes whether the inverter has one.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedDcDisconnectInUse" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>This indicates whether the system is using the inverter's integrated disconnect switch, rather than whether the inverter has one. The InverterDefintion describes whether the inverter has one.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                    <xs:element minOccurs="0" name="integratedAcDisconnectInUse" type="xs:boolean">
                        <xs:annotation>
                            <xs:documentation>This indicates whether the system is using the inverter's integrated disconnect switch, rather than whether the inverter has one. The InverterDefintion describes whether the inverter has one.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="microInverter">
        <xs:annotation>
            <xs:documentation>Defines a specific instance of a microInverter in a PvSystem that converts DC electricity to AC.</xs:documentation>
        </xs:annotation>
        <xs:complexContent>
            <xs:extension base="equipmentInstance">
                <xs:sequence>
                    <xs:element minOccurs="0" name="sourceCircuitMembershipIdRef" type="xs:IDREF">
                        <xs:annotation>
                            <xs:documentation>References the AC branch circuit that this microInverter instance is a member of.</xs:documentation>
                        </xs:annotation>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType abstract="false" name="pvArray">
        <xs:annotation>
            <xs:documentation>A PV Array is defined as a group of modules that share the same location, and orientation. They usually share the same make and model.  A PV Array may feed one or more inverter instances (may be string/central inverter or multiple micro-inverters, one per module).</xs:documentation>
        </xs:annotation>
        <xs:all>
            <xs:element minOccurs="0" name="name" type="xs:string"/>
            <xs:element minOccurs="0" name="moduleQuantity" type="xs:int"/>
            <xs:element minOccurs="0" name="dcRating" type="xs:integer">
                <xs:annotation>
                    <xs:documentation>Sum total STC power rating for an entire generic array.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="installationStyle" type="arrayInstallStyleEnum">
                <xs:annotation>
                    <xs:documentation>Describes the installation style used for the array. The installation style categorizes the type of racking and mounting equipment used.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="azimuth" type="angle"/>
            <xs:element minOccurs="0" name="tilt" type="angle"/>
            <xs:element default="FIXED" minOccurs="0" name="trackingMode" type="trackingModeEnum"/>
            <xs:element minOccurs="0" name="commonModuleStandoff" type="xs:double">
                <xs:annotation>
                    <xs:documentation>Standoff describes the average spacing from the back of the modules to the installation surface (e.g. roof or ground).  Standoff is used in calculating system output when the calculator considers heat effects of reduced air circulation to the back of the modules.  Many incentive programs reduce incentive payments when air circulation is minimal.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="commonModuleOrientation" type="panelOrientationEnum">
                <xs:annotation>
                    <xs:documentation>The orientation of the rectangular module.  "Portrait" indicates that the long dimension is vertical, while "Landscape" indicates that the long dimension is horizontal.

If an individual module has an orientation different from the common value, that orientation can be called out in that particular module's detail element.  That value can override the common value provided here.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element maxOccurs="1" minOccurs="0" name="commonModuleTiltEdge"
                type="panelTiltEdgeEnum">
                <xs:annotation>
                    <xs:documentation>This defines the module edge on which the tilt relative to the array's RoofFace (if given) azimuth occurs.  For example, a "top" edge tilt is routinely used on a north roof to tilt the module to face south (aka "reverse tilt"). "Bottom edge" is the edge toward the azimuth direction of the roofFace.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="solarAccess">
                <xs:annotation>
                    <xs:documentation>A collection of solar access measurements.  For example, can be used to include basic solar access measurements of multiple points on a roof face, or solar array.</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                    <xs:sequence>
                        <xs:element minOccurs="1" name="solarAccessPercentage"
                            type="solarAccessPercentage" maxOccurs="unbounded">
                            <xs:annotation>
                                <xs:documentation>Each instance can support a separate point at which it is measured. The point is optional. A single instance can represent the average for the array.</xs:documentation>
                            </xs:annotation>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element minOccurs="0" name="mountingSystem" type="mountingSystem">
                <xs:annotation>
                    <xs:documentation>Information used to describe the mounting system and if roof mounted, assess the structural support underlying the mounting system. For example, the State of California's expedited permit process.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="moduleLayout" type="moduleLayout">
                <xs:annotation>
                    <xs:documentation>Physical layout positions of the modules within the array.</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element minOccurs="0" name="moduleLayout2dLocal" type="moduleLayout2dLocal"/>
            <xs:element minOccurs="0" name="modulesOverhangRoofEdges" type="xs:boolean">
                <xs:annotation>
                    <xs:documentation>Expedited permit processes dictate that modules be fully contained within the perimeter of the roof edges on which it is installed.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:all>
        <xs:attribute name="id" type="xs:ID"/>
        <xs:attribute name="pvModuleDefinitionIdRef" type="xs:IDREF">
            <xs:annotation>
                <xs:documentation>ID of the PvModuleDefinition within the PvSystem instance.  The PvModuleDefintion describes the make and model of the PV module. The PvArray is assumed to use the same module for the entire array.</xs:documentation>
            </xs:annotation>
        </xs:attribute>
        <xs:attribute name="roofArrayInstallAreaIdRef" type="xs:IDREF"/>
        <xs:attribute name="groundArrayInstallAreaIdRef" type="xs:IDREF"/>
    </xs:complexType>
    <xs:element name="holes">
        <xs:annotation>
            <xs:documentation/>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="hole">
                    <xs:annotation>
                        <xs:documentation>A hole is a polygon completely contained within a roof face. Holes may represent outlines of chimneys, skylights, dormers, vents, etc.</xs:documentation>
                    </xs:annotation>
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element minOccurs="0" name="polygon2dOrthoProjection"
                                type="polygon2d"/>
                            <xs:element minOccurs="0" name="polygon2dLocal" type="polygon2d"/>
                            <xs:element minOccurs="0" name="polygon3dScene" type="polygon3d"/>
                        </xs:sequence>
                        <xs:attribute name="id"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:complexType name="acPointOfConnection">
        <xs:annotation>
            <xs:documentation>The point of connection (POC) of a pvSystem to the existing AC electical distribution system.</xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:choice>
                <xs:element name="electricalPanelIdRef" type="xs:IDREF">
                    <xs:annotation>
                        <xs:documentation>Electrical Panel where connection is made.</xs:documentation>
                    </xs:annotation>
                </xs:element>
                <xs:element name="electricalPanelId" type="xs:string">
                    <xs:annotation>
                        <xs:documentation>Electrical Panel where connection is made. Use in case where electricalPanel is not included within pvSystem. For example, allows electrical panel to be included in an element outside pvSystem, such as in a project's electricalDistributionHierarchy, but pvSystem is defined outside project element.</xs:documentation>
                    </xs:annotation>
                </xs:element>
            </xs:choice>
            <xs:element name="sideOfPanelOcpdWhereConnected"
                type="sideOfPanelOcpdWhereConnectedEnum">
                <xs:annotation>
                    <xs:documentation>Describes which side of the electical panel's overcurrent protection device that the connection is or will be made. This affects the allowable ampacity.</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
        <xs:attribute name="id" type="xs:ID"/>
    </xs:complexType>
    <xs:complexType name="shadowSource">
        <xs:complexContent>
            <xs:extension base="obstruction">
                <xs:all/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema>
